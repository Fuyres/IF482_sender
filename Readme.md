# IF 482 Sender
IF 482 Sender it's simple example for sync time with <br/> Master Clock - Mobatime CompuTime Center CTC.

# IF 482 Specification
IF 482 Standard ASCII telegram sent from an external time base <br/>
(e.g. IF 482 MOBALINE/ RS 232 interface, MTC module U 4.1.x or <br/>
one of the below listed time systems) for automatic time-setting of <br/>
slave clocks (e.g. BU 190 series) or master clocks HN 425, CTC, <br/>
MTS, ETC and for master clock modules U 1.2.x in Master Time <br/>
Center MTC, through the serial interface RS 232 or RS 422. <br/>
Time telegram (ASCII) once per second, terminating at the beginning of the <br/>
designed second in the telegram.

|            |            |
|------------|------------|
| Baud rate: | 9600 Bit/s |
| Data bits: | 7          |
| Parity:    | even       |
| Stop bit:  | 1          |
| Jitter:    | < 50ms     |
| Cycle:     | 1 second   |

|                  |                                                                              |
|------------------|------------------------------------------------------------------------------|
| Protocol:        | MB IF482 telegram                                                            |
| Interface:       | RS232 or RS422                                                               |
| Synchronization: | Telegram ends at the beginning of the second <br/> specified in the telegram |

# Format of ASCII telegram string
| Byte No. | Meaning                     | Character | HEX Code |
|----------|-----------------------------|-----------|----------|
| 1        | Start character             | O         | 4F       |
| 2        | Monitoring 1)               | A or M    | 41 or 4D |
| 3        | Time-Season (Winter/Summer) | W/S/U/L   | 57 or 53 |
| 4        | Year tens                   | 0 .. 9    | 30 .. 39 |
| 5        | Year units                  | 0 .. 9    | 30 .. 39 |
| 6        | Month tens                  | 0 or 1    | 30 or 31 |
| 7        | Month units                 | 0 .. 9    | 30 .. 39 |
| 8        | Day tens                    | 0 .. 3    | 30 .. 33 |
| 9        | Day unit                    | 0 .. 9    | 30 .. 39 |
| 10       | Monday .. Sunday 2)         | 1 .. 7    | 31 .. 37 |
| 11       | Hours tens                  | 0 .. 2    | 30 .. 32 |
| 12       | Hours units                 | 0 .. 9    | 30 .. 39 |
| 13       | Minutes tens                | 0 .. 5    | 30 .. 35 |
| 14       | Minutes units               | 0 .. 9    | 30 .. 39 |
| 15       | Seconds tens                | 0 .. 5    | 30 .. 35 |
| 16       | Seconds units               | 0 .. 9    | 30 .. 39 |
| 17       | Telegram end character      | <CR>      | 0D       |

1) With a correctly received time in the sender unit, the ASCII character 'A' is issued.
If 'M' is issued, this indicates that the sender was unable to receive any time signal for
over 12 hours (time is accepted with ‘A’ and ‘M’). <br/>
W: Standard time, <br/>
S: Season time, <br/>
U: UTC time (not supported from all systems), <br/>
L: Local Time
2) Day of week:
 not evaluated by model BU-190, use "F" instead for this model

Refer to instruction manuals BE-800030 for master clocks HN 425 and HN 425 R,
to TE- and BE-800103 for master clock modules U 1.2.0 to U 1.2.2,
to TE- and BE-800109 for serial communication module U 4.1.0,
to BE-800161 for CTC master clock or to BE-800196 for MTS.

Example IF482 telegram: "OAL160806F170400"

# from ESP32-Paxcounter project
The IF482 Generator needs an high precise 1 Hz clock signal which cannot be
acquired in suitable precision on the ESP32 SoC itself. Additional clocking
hardware is required, ususally the clock signal is generated by external RTC or
GPS which can generate a precise time pulse signal (+/- 2ppm).

In this example code we use a Maxim DS3231 RTC chip, and configure the chips's
interrupt output pin as clock. The clock signal triggers an interrupt on the
ESP32, which controls the realtime output of IF482 telegram. This is why code in
IF482.cpp depends on code in RTCTIME.cpp.